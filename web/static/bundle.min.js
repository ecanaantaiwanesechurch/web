(function(){"use strict";(()=>{const z=e=>e?"https://cdn.jsdelivr.net/gh/ecanaantaiwanesechurch/web@main/web/static/logo_en.png":"https://cdn.jsdelivr.net/gh/ecanaantaiwanesechurch/web@main/web/static/logo_zh.png",w=[{en:"About Us",zh:"關於我們",items:[{en:"Our Story",zh:"我們的故事",enLink:"/en/about-us/our-story",zhLink:"/about-us/our-story"},{en:"Careers",zh:"徵人啟事",enLink:"/about-us/careers"},{en:"Resources",zh:"教會資源",enLink:"/en/about-us/resources",zhLink:"/about-us/resources"}]},{en:"Worship Services",zh:"聚會與敬拜",items:[{en:"Worship Gathering",zh:"時間與地點",enLink:"/en/gatherings/service-information",zhLink:"/worship/locations"},{en:"Sermon Recordings",zh:"主日信息",enLink:"/en/gatherings/sermons",zhLink:"/sermons"},{en:"2025 All Church Retreat",zh:"2025 全教會退修會",enLink:"https://retreat.ecanaan.org/"}]},{en:"Ministries",zh:"教會事工",items:[{en:"Taiwanese Ministry",zh:"台語事工",enLink:"/ministries/taiwanese-ministry",enOrder:1},{en:"Mandarin Ministry",zh:"華語事工",enLink:"/ministries/mandarin-ministry",enOrder:2},{en:"English Ministry",zh:"英語事工",enLink:"/ministries/english-ministry",enOrder:0,items:[{en:"Home",zh:"主頁",enLink:"/ministries/english-ministry"},{en:"Announcements",zh:"最新公告",enLink:"/ministries/english-ministry/announcements"}]},{en:"Youth Ministry",zh:"青少事工",enLink:"/ministries/youth-ministry",items:[{en:"Home",zh:"主頁",enLink:"/ministries/youth-ministry"},{en:"Activities",zh:"團契活動",enLink:"/ministries/youth-ministry/activities"},{en:"Latest Updates",zh:"最新消息",enLink:"/ministries/youth-ministry/updates"}]},{en:"Children's Ministry",zh:"兒童事工",items:[{en:"Home",zh:"主頁",enLink:"/ministries/childrens-ministry"},{en:"Sunday Programs",zh:"主日崇拜",enLink:"/ministries/childrens-ministry/sunday-programs"},{en:"Announcements",zh:"最新公告",enLink:"/ministries/childrens-ministry/announcements"}]},{en:"Family Ministry",zh:"家庭事工",enLink:"/en/ministries/family-ministry",zhLink:"/ministries/family-ministry"},{en:"Missions",zh:"宣教事工",items:[{en:"Mission Support",zh:"宣教支持",enLink:"/missions/mission-support"},{en:"2025 STM Directory",zh:"2025 短宣名錄",enLink:"/missions/2025-stm-directory"},{en:"2025 STM Support Letters",zh:"2025 短宣代禱",enLink:"/missions/2025-stm-support-letters"},{en:"2025 STM Updates",zh:"2025 STM 最新消息",enLink:"/missions/2025-stm-updates"}]}]},{en:"Growth",zh:"靈命成長",items:[{en:"Sunday School",zh:"主日學",enLink:"/en/growth/sunday-school",zhLink:"/growth/sunday-school"},{en:"Basic Christianity",zh:"基要真理",enLink:"/growth/basic-christianity"},{en:"Discipleship",zh:"門徒訓練",enLink:"/growth/discipleship"},{en:"Blog",zh:"文章分享",enLink:"/growth/blog"},{en:"Testimony (Video)",zh:"見證分享 (影音)",enLink:"/growth/videos"},{en:"Special Events",zh:"特別聚會",enLink:"/growth/special-events"},{en:"CTCC 45",zh:"CTCC 45",enLink:"/ctcc-45"}]},{en:"Fellowships",zh:"團契生活",items:[{en:"Taiwanese Fellowships",zh:"台語團契",enLink:"/en/fellowships/tm",zhLink:"/fellowships/tm",enOrder:1},{en:"Mandarin Fellowships",zh:"華語團契",zhLink:"/fellowships/mm",enOrder:2},{en:"English Fellowships",zh:"英語團契",enLink:"/en/fellowships/en",enOrder:0},{en:"Event Highlights",zh:"活動花絮",enLink:"/photos"}]},{en:"中文",zh:"English",language:!0}],L=[["/zh","/en"],["/fellowships/tm/cupertino","/en/fellowships/tm/cupertino"],["/fellowships/tm/fremont","/en/fellowships/tm/fremont"],["/fellowships/tm/mid-peninsula","/en/fellowships/tm/mid-peninsula"],["/fellowships/tm/milpitas","/en/fellowships/tm/milpitas"],["/fellowships/tm/palo-alto","/en/fellowships/tm/palo-alto"],["/fellowships/tm/saratoga","/en/fellowships/tm/saratoga"],["/fellowships/tm/living-springs","/en/fellowships/tm/living-springs"],["/fellowships/tm/living-stones","/en/fellowships/tm/living-stones"],["/fellowships/tm/tyfm","/en/fellowships/tm/tyfm"]],x=w.concat(w.flatMap(e=>e.items||[])).filter(e=>e.zhLink!=null&&e.enLink!=null).map(e=>[e.zhLink,e.enLink]).concat(L),C=Object.fromEntries(x),g=Object.fromEntries(x.map(([e,t])=>[t,e])),d={mobileMenuOpen:!1,lastRenderedLanguage:null,cachedElements:{}};function m(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",n):n()}function n(){window.addEventListener("popstate",$),window.addEventListener("hashchange",$);const e=history.pushState;history.pushState=function(){const t=e.apply(history,arguments);return $(),t},$()}function s(){return window.location.hash==="#en"||window.location.pathname.startsWith("/en")}function a(e,t){if(e.language){const c=window.location.pathname;let i=(t?g:C)[c]||c;return t?i:`${i}#en`}let l=t?e.enLink||e.zhLink:e.zhLink||e.enLink;return t&&l&&!l.startsWith("http")&&(l=`${l}#en`),l}function p(e,t){const l=t?e.en:e.zh;if(e.items&&e.items.length>0){const r=e.items.map(i=>{const o=a(i,t),h=t?i.en:i.zh;return`
          <li>
            <a href="${o||"#"}" class="px-6 py-3 text-gray-600 hover:bg-gray-50 block border-l-2 border-gray-200 ml-4 text-base">
              ${h}
            </a>
          </li>
        `}).join("");return`
        <li class="relative group/nested">
          <div role="button" tabindex="0" aria-expanded="false" aria-haspopup="true" class="px-4 py-2 text-gray-700 hover:bg-gray-100 cursor-pointer flex items-center justify-between desktop-nested-dropdown-toggle">
            <span>${l}</span>
            <svg class="w-4 h-4 ml-2 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </div>
          <ul class="dropdown-closed transition-all duration-200 bg-gray-50">
            ${r}
          </ul>
        </li>
      `}return`
      <li>
        <a href="${a(e,t)||"#"}" class="px-4 py-3 text-gray-700 hover:bg-gray-100 block whitespace-nowrap text-base">
          ${l}
        </a>
      </li>
    `}function f(e,t){const l=t?e.en:e.zh;if(e.language)return`
        <li class="relative">
          <a href="${a(e,t)||"#"}"
             class="px-2 lg:px-4 py-3 text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 text-base lg:text-lg whitespace-nowrap">
            ${l}
          </a>
        </li>
      `;if(e.items&&e.items.length>0){let r=[...e.items];t&&(r=r.sort((o,h)=>o.enOrder-h.enOrder));const i=r.map(o=>p(o,t)).join("");return`
        <li class="relative group">
          <div role="button" tabindex="0" aria-expanded="false" aria-haspopup="true" class="px-2 lg:px-4 py-3 text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 text-base lg:text-lg cursor-pointer whitespace-nowrap">
            ${l}
          </div>
          <ul class="absolute left-0 top-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 min-w-32 w-max">
            ${i}
          </ul>
        </li>
      `}return`
      <li>
        <a href="${a(e,t)||"#"}"
           class="px-2 lg:px-4 py-3 text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 text-base lg:text-lg whitespace-nowrap">
          ${l}
        </a>
      </li>
    `}function k(e,t,l,c){const r=t?e.en:e.zh,o=l===c-1?"":"border-b border-gray-100";if(e.language)return`
        <li>
          <a href="${a(e,t)||"#"}"
             class="block px-4 py-3 text-gray-700 hover:bg-gray-50 ${o} text-base">
            ${r}
          </a>
        </li>
      `;if(e.items&&e.items.length>0){let u=[...e.items];t&&(u=u.sort((y,v)=>y.enOrder-v.enOrder));const b=u.map(y=>{const v=t?y.en:y.zh;if(y.items&&y.items.length>0){const A=y.items.map(S=>{const N=a(S,t),B=t?S.en:S.zh;return`
              <li>
                <a href="${N||"#"}"
                   class="block px-8 py-2 text-gray-600 hover:bg-gray-50">
                  ${B}
                </a>
              </li>
            `}).join("");return`
            <li>
              <div role="button" tabindex="0" aria-expanded="false" aria-haspopup="true" class="w-full px-6 py-2 text-left text-gray-600 hover:bg-gray-50 flex items-center justify-between mobile-nested-dropdown-toggle bg-gray-50 cursor-pointer">
                ${v}
                <svg class="w-4 h-4 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </div>
              <ul class="dropdown-closed transition-all duration-200 bg-gray-50">
                ${A}
              </ul>
            </li>
          `}return`
          <li>
            <a href="${a(y,t)||"#"}"
               class="block px-6 py-2 text-gray-600 hover:bg-gray-50">
              ${v}
            </a>
          </li>
        `}).join("");return`
        <li class="${o}">
          <div role="button" tabindex="0" aria-expanded="false" aria-haspopup="true" class="w-full px-4 py-3 text-left text-gray-700 hover:bg-gray-50 flex items-center justify-between mobile-dropdown-toggle text-base cursor-pointer">
            ${r}
            <svg class="w-5 h-5 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </div>
          <ul class="dropdown-closed transition-all duration-200">
            ${b}
          </ul>
        </li>
      `}return`
      <li>
        <a href="${a(e,t)||"#"}"
           class="block px-4 py-3 text-gray-700 hover:bg-gray-50 ${o} text-base">
          ${r}
        </a>
      </li>
    `}function M(){const e=document.getElementById("mobile-menu"),t=document.getElementById("mobile-menu-toggle"),l=document.querySelector(".hamburger-icon"),c=document.querySelector(".close-icon");d.mobileMenuOpen=!d.mobileMenuOpen,t&&(t.setAttribute("aria-expanded",d.mobileMenuOpen),t.setAttribute("aria-label",d.mobileMenuOpen?"Close mobile menu":"Open mobile menu")),d.mobileMenuOpen?(e.classList.remove("hidden"),l.classList.add("hidden"),c.classList.remove("hidden"),requestAnimationFrame(()=>{e.classList.remove("opacity-0","scale-95"),e.classList.add("opacity-100","scale-100")})):(e.classList.remove("opacity-100","scale-100"),e.classList.add("opacity-0","scale-95"),l.classList.remove("hidden"),c.classList.add("hidden"),setTimeout(()=>{d.mobileMenuOpen||e.classList.add("hidden")},200))}function T(){document.querySelectorAll(".mobile-dropdown-toggle").forEach(c=>{const r=function(i){i.preventDefault();const o=this.nextElementSibling,h=this.querySelector("svg");o.classList.contains("dropdown-open"),o.classList.contains("dropdown-closed")?(o.classList.remove("dropdown-closed"),o.classList.add("dropdown-open"),h.style.transform="rotate(180deg)",this.setAttribute("aria-expanded","true")):(o.classList.remove("dropdown-open"),o.classList.add("dropdown-closed"),h.style.transform="rotate(0deg)",this.setAttribute("aria-expanded","false"))};c.addEventListener("click",r),c.addEventListener("keydown",function(i){(i.key==="Enter"||i.key===" ")&&r.call(this,i)})}),document.querySelectorAll(".mobile-nested-dropdown-toggle").forEach(c=>{const r=function(i){i.preventDefault();const o=this.nextElementSibling,h=this.querySelector("svg");o.classList.contains("dropdown-closed")?(o.classList.remove("dropdown-closed"),o.classList.add("dropdown-open"),h.style.transform="rotate(180deg)",this.setAttribute("aria-expanded","true")):(o.classList.remove("dropdown-open"),o.classList.add("dropdown-closed"),h.style.transform="rotate(0deg)",this.setAttribute("aria-expanded","false"))};c.addEventListener("click",r),c.addEventListener("keydown",function(i){(i.key==="Enter"||i.key===" ")&&r.call(this,i)})}),document.querySelectorAll(".desktop-nested-dropdown-toggle").forEach(c=>{const r=function(i){i.preventDefault();const o=this.nextElementSibling,h=this.querySelector("svg");o.classList.contains("dropdown-closed")?(o.classList.remove("dropdown-closed"),o.classList.add("dropdown-open"),h.style.transform="rotate(180deg)",this.setAttribute("aria-expanded","true")):(o.classList.remove("dropdown-open"),o.classList.add("dropdown-closed"),h.style.transform="rotate(0deg)",this.setAttribute("aria-expanded","false"))};c.addEventListener("click",r),c.addEventListener("keydown",function(i){(i.key==="Enter"||i.key===" ")&&r.call(this,i)})})}function $(){const e=document.getElementById("navbar-container");if(!e)return;const t=s();if(d.lastRenderedLanguage===t&&e.innerHTML)return;d.lastRenderedLanguage=t;const l=t?"/en":"/zh",c=z(t),r=w.map(u=>f(u,t)).join(""),i=w.map((u,b)=>k(u,t,b,w.length)).join(""),o=`
      <nav class="bg-white relative pb-2">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="flex justify-between items-center h-20">
            <!-- Logo -->
            <div class="flex-shrink-0">
              <a href="${l}" class="flex items-center">
                <img src="${c}" alt="Logo" class="w-auto object-contain" style="height: 48px;">
              </a>
            </div>

            <!-- Desktop Navigation -->
            <div class="hidden md:block">
              <ul class="flex items-center space-x-1">
                ${r}
              </ul>
            </div>

            <!-- Mobile menu button -->
            <div class="md:hidden">
              <div id="mobile-menu-toggle" role="button" tabindex="0" aria-expanded="false" aria-label="Open mobile menu" class="p-2 text-gray-700 hover:text-blue-600 focus:outline-none cursor-pointer">
                <svg class="w-6 h-6 hamburger-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
                <svg class="w-6 h-6 close-icon hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
              </div>
            </div>
          </div>
        </div>

        <!-- Mobile Navigation -->
        <div id="mobile-menu" class="hidden md:hidden absolute top-full right-4 bg-white border border-gray-200 rounded-lg shadow-lg z-50 overflow-y-auto transform transition-all duration-200 ease-in-out opacity-0 scale-95 w-80 max-w-[calc(100vw-2rem)] max-h-[80vh]">
          <ul>
            ${i}
          </ul>
        </div>
      </nav>
    `;e.innerHTML=o;const h=document.getElementById("mobile-menu-toggle");h&&(h.addEventListener("click",M),h.addEventListener("keydown",function(u){(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),M())})),T(),O(),e.addEventListener("click",function(u){const b=u.target.closest("a");if(b&&(b.textContent.trim()==="English"||b.textContent.trim()==="中文")){u.preventDefault();const v=new URL(b.href),E=new URL(window.location.href);(v.pathname!==E.pathname||v.hash!==E.hash)&&(v.pathname===E.pathname?window.location.hash=v.hash:window.location.href=b.href)}}),document.addEventListener("click",function(u){d.mobileMenuOpen&&!u.target.closest("#mobile-menu")&&!u.target.closest("#mobile-menu-toggle")&&M()}),window.addEventListener("resize",function(){window.innerWidth>=768&&d.mobileMenuOpen&&M()})}function O(){const e=document.getElementsByClassName("super-footer__icons")[0];if(!e)return;const t=e.getElementsByTagName("a");if(!t)return;const l=t[t.length-1];if((l.href||"").includes("tithe.ly"))return;const r=document.createElement("a");r.href="https://tithe.ly/give_new/www/#/tithely/give-one-time/775254",r.innerHTML='<svg data-v-c759af74="" viewBox="0 0 43 45" height="24" width="24" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-aquamarine"><path xmlns="http://www.w3.org/2000/svg" d="M21.5592 22.6139C25.2962 21.076 28.1132 17.7722 28.4582 13.8987L28.5157 13.0443C28.5157 7.8038 25.8136 3.13291 21.6167 0C17.4199 3.13291 14.5453 7.8038 14.5453 13.0443L14.6028 13.8987C14.9477 17.7722 17.7648 21.076 21.5592 22.6139ZM19.777 28.7089C19.547 27.9114 19.2596 27.1709 18.8571 26.4304C18.0523 24.7215 16.8449 23.2405 15.3502 22.1013C13.1655 20.3924 10.3484 19.424 7.58885 19.424H0C0 20.3924 0 21.3038 0 22.2722C0.0574913 23.924 0.517421 25.5759 1.20732 27.057C2.01219 28.7658 3.21951 30.2468 4.71429 31.3861C6.84146 33.0949 9.60104 34.1772 12.3606 34.1772H19.9495C19.9495 32.1835 20.0645 29.7342 19.777 28.7089ZM23.9164 26.4304C23.5714 27.1709 23.2265 27.9114 22.9965 28.7089C22.824 29.5063 22.824 31.1582 22.824 32.8101C22.824 33.2658 22.824 33.7215 22.824 34.1772V36.7975L22.4791 44.5443H23.9164C23.9164 44.3165 23.9739 44.0316 23.9739 43.8038C24.0888 41.6392 24.2613 39.3038 24.5488 37.3671C24.8937 35.2025 27.2509 34.2911 28.9756 34.2342H30.4129C33.1725 34.2342 35.8746 33.1519 38.0592 31.443C39.554 30.3038 40.7613 28.8228 41.5662 27.1139C42.3136 25.6329 42.716 23.981 42.7735 22.3291C42.7735 21.9873 42.7735 21.7025 42.7735 21.3608C42.7735 20.7342 42.7735 20.1076 42.7735 19.481H35.1847C32.4251 19.481 29.608 20.4494 27.4233 22.1582C25.9286 23.2975 24.7213 24.7785 23.9164 26.4304Z" fill="rgb(91, 217, 164"></path></svg>',r.target="_blank",r.rel="noopener noreferrer",e.insertBefore(r,l.nextSibling)}window.NewNavbar={init:m,updateNavbar:$,getCurrentLanguage:s,toggleMobileMenu:M,destroy:()=>{d.cachedElements={}}},m()})(),(()=>{const z={"/photos":1,srcdoc:1},w=["allgallery","tmgallery","mmgallery","emgallery","ymgallery","cmgallery","ccdanceteamgallery"];document.readyState==="loading"?document.addEventListener("DOMContentLoaded",L):L();function L(){z[window.location.pathname]&&((function(g){var d=g.pushState;g.pushState=function(){const m=d.apply(g,arguments);return x(),m}})(window.history),x())}function x(){w.forEach(async g=>{try{await C(g)}catch(d){console.error(d)}})}async function C(g){if(typeof Swiper>"u")return;const d=new Swiper(`#swiper-${g}`,{spaceBetween:12,scrollbar:{el:".swiper-scrollbar",hide:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});if(typeof PhotoSwipeLightbox>"u")return;const m=new PhotoSwipeLightbox({gallery:`#${g}`,children:"a",pswpModule:PhotoSwipe});m.addFilter("itemData",n=>(n.element.dataset.actionType&&(n.actionType=n.element.dataset.actionType,n.targetUrl=n.element.getAttribute("href")),n)),m.on("imageClickAction",n=>{const s=m.pswp.currSlide.data;s.actionType==="open"&&s.targetUrl&&(window.open(s.targetUrl,"_blank"),n.preventDefault())}),m.on("contentActivate",({content:n})=>{n.data.actionType==="open"&&n.data.targetUrl&&n.element.classList.add("link")}),m.on("close",function(){var n=m.pswp.currIndex;d.slideTo(n,0,!1)}),m.init()}})(),(()=>{const z=["/sermons","/en/gatherings/sermons","/growth/videos","/fellowships/mm/nfl/nfl-videos","/events/2024-mm-gospel-night","/events/2023-mm-gospel-night","srcdoc"],w=new IntersectionObserver(n=>{n.forEach(s=>{s&&s.intersectionRatio>0&&s.target&&m(s.target)})});document.readyState==="loading"?document.addEventListener("DOMContentLoaded",L):L();function L(){if(MutationObserver){const n=document.getElementsByClassName("super-root")[0];n&&new MutationObserver(()=>{d()}).observe(n,{childList:!0,subtree:!0})}d()}function x(n){if(/player/.test(n))return n;const s=new URL(n);if(s.pathname){const a=s.pathname.split("/");if(a.length>2)return`https://player.vimeo.com/video/${a[1]}?h=${a[2]}`}return`https://player.vimeo.com/video${s.pathname}`}function C(n){if(/embed/.test(n))return n;const s=new URL(n);if(s.host==="youtu.be")return`https://www.youtube.com/embed${s.pathname}`;const a=s.searchParams.get("v");return a?`https://www.youtube.com/embed/${a}`:null}function g(n){if(!n)return{};const s=n.getElementsByTagName("img")[0],a=n.getElementsByClassName("notion-property__url")[0];if(!s||!a)return{image:s};const p=a.getElementsByTagName("a")[0];if(!p)return{image:s};const f=p.getAttribute("href")||"";let k;return/vimeo/i.test(f)?k=x(f):/youtu/i.test(f)&&(k=C(f)),{image:s,url:k}}function d(){if(!z.some(p=>window.location.pathname.startsWith(p)))return;const a=Array.from(document.getElementsByClassName("notion-collection-card gallery"));a.length!==0&&a.forEach(p=>{const{image:f,url:k}=g(p);f&&f.getAttribute("_obs")==null&&(f.setAttribute("_obs","1"),f.className=`${f.className} player`,k&&w.observe(p))})}function m(n){const{image:s,url:a}=g(n);if(!s||!a)return;const p=document.createElement("iframe");p.setAttribute("src",a),p.setAttribute("frameborder","0"),p.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),p.setAttribute("allowfullscreen","1"),p.className=`${s.className} player`,s.replaceWith(p),w.unobserve(n)}})()})();
